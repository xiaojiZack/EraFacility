2023/3/4
TODO
    开场剧情，地图，基本交流com

2023/3/7
关于地图的问题
    地图编辑器只能打开第一级的地图文件，如果多层嵌套的话会读取不到。
    地图编辑器只用来生成和修改mapdata是可以的，而且保存的mapdata信息是作为额外的txt，由于仅仅保存了mapdata，所以不会在下一次直接读入初始化
    MapEditor的addspot直接在board对象下存储spot对象，我觉得这是非常丑陋的
    board的get方法通过id来查找对象，
    而board下的spot方法只存储了spotid-{位置，朝向，地点类型，地形}这样的信息，而不存储spot对象。为什么不直接存储spot对象呢，这些信息放在spot对象内就好了。
    如果要和GenerateSpot联动生成地图的话

    有必要使用map吗？
    使用map的好处，类TW的交流模式，露出系指令的具体实现
    地图仅保存地图静态信息，不包含具体的函数处理。
    进出设施相关的逻辑处理交由相关移动指令处理。

    map的初始化逻辑
        ·在setup文件夹下保存map系统的初始化
        ·读取需要初始化的board列表json
        ·根据json内容(mapid, group, obj:{type, name?, entry?, main?, xy?})通过addBoard生成
        ·对生成的Board对象加载其mapdata
        ·读取需要初始化的spot列表json
        ·根据json内容执行spot对应的初始化函数
        ·根据json内容([boardId,spotId,name,spotType])通过addSpot生成
        
2023/3/11
    存档内的地图变更使用flag或者直接一个字典存储patch放在存档数据内。
    mapdata仅仅保存静态数据。

2023/3/15
    关于NPC的移动，是生成移动路径后按照时间节点检查还是按照概率随机出现？
    采用根据人物计划设置人物移动时间刻的效果
    人物包含玩家主控人物
    时间变化->持续性触发->检查所有人物时间表是否有触发事件->按顺序执行所有触发事件->注册新的触发事件->等待下一次时间变化

    持续性触发:Base自然变化,装具变化,药液变化,

    接下来是做时间刻系统

    action 和 com里选一个
    action有placement，autokeep, 涉及到的bodypart

    用com吧
    

2023-3-17
    继续调整com的流程

2023-3-18
    先做更多指令还是先处理一下地图逻辑？比如跳转、访问许可之类的？

2023-3-20
    准入检测，目前只做pc的准入检测
    之后是学院层的其他建筑，教室、放映厅、体育馆、游泳池、办公室、礼堂、商店、食堂、医务室、广播站、图书馆
    spots的isopenhour未完成。

2023-3-21
    今日任务：新的论文+spots的isopenhour+学院层地图

2023-3-22
    今日任务: 


2023-3-29
    模糊化人物信息显示：作为todo吧，首先要对信息进行分级
    做一个日志吧，存储的信息包括:当前日期、当前目标、下一个重要节日、人物列表（接到人物细节属性）、成就？、地图

2023-3-31
    人物信息的模糊化做完了，之后可以添加各种判断条件
    Ipad部分还缺少成就和当前目标还没完成
    人物当前位置还没完成，需要新写一个根据mapid和坐标返回spot对象的函数
    人物的服装外貌考虑用别的描述手法，

2023-4-1
    人物足部等部分没有算在暴露度计算更新内，导致部分衣物（袜子，鞋子）没有暴露度判定